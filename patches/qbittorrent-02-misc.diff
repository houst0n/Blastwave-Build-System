--- qbittorrent-2.8.4/src/misc.cpp.orig	2011-08-09 17:25:33.000000000 +0000
+++ qbittorrent-2.8.4/src/misc.cpp	2011-08-29 00:17:52.604991116 +0000
@@ -169,9 +169,15 @@
   Q_ASSERT(dir_path.exists());
 #ifndef Q_WS_WIN
   unsigned long long available;
+#ifdef Q_OS_SOLARIS
+  struct statvfs stats;
+  const QString statfs_path = dir_path.path()+"/.";
+  const int ret = statvfs (qPrintable(statfs_path), &stats) ;
+#else
   struct statfs stats;
   const QString statfs_path = dir_path.path()+"/.";
   const int ret = statfs (qPrintable(statfs_path), &stats) ;
+#endif
   if(ret == 0) {
     available = ((unsigned long long)stats.f_bavail) *
         ((unsigned long long)stats.f_bsize) ;
